@using Sandbox;
@using Sandbox.UI;
@using System;
@namespace Reprint
@inherits FactoryPanel

<root>
	<FactoryStepPanel Fact=@(this)>
		<Name>Horizontal Line</Name>
		<Config>
			<div class="sel group">
				@foreach (Pixel.ColorLookup clr in Enum.GetValues<Pixel.ColorLookup>())
				{
					var sel = Fact.color == clr;
					var color = Pixel.GetColor(clr);
					<button @onclick=@(() => SelectColor(clr)) class="clr sm @(sel ? "pressed" : "")"
						style="color: @color.color.Hex"><span>radio_button_@(sel ? "" : "un")checked</span><span
							class="lbl">@(color.Initial)</span></button>
				}
			</div>
		</Config>
	</FactoryStepPanel>
</root>

@code
{
	private bool showColorDrop = false;
	private FactoryLine Fact { get => factory as FactoryLine; }

	private void ToggleColorDropdown()
	{
		showColorDrop = !showColorDrop;
	}

	private void ShowColorDropdown()
	{
		showColorDrop = true;
	}

	private void HideColorDropdown()
	{
		showColorDrop = false;
	}

	private void SelectColor(Pixel.ColorLookup sel)
	{
		Fact.color = sel;
		HideColorDropdown();
	}

	protected override FactoryStep CreateFactory() => new FactoryLine();
	protected override int BuildHash() => HashCode.Combine(showColorDrop);
}
