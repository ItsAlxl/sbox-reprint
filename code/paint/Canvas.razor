@using Sandbox;
@using Sandbox.UI;
@namespace Reprint
@inherits PanelComponent

<root>
	@{
		int limit = paint.width > paint.height ? paint.width : paint.height;
		float side = (256.0f - limit - 16) / limit;
		string sidePx = (int)side + "px";
		string fontPx = (int)(side) + "px";
		for(var x = 0; x < paint.width; x++)
		{
			<div class="row">
			@for(var y = 0; y < paint.height; y++)
			{
				var pxl = paint.PixelAt(x, y);
				<div style="background-color: @pxl.FinalColor.Hex; color: @pxl.ContrastGray.Hex; border-color: @pxl.ContrastGray.Hex; width: @sidePx; height: @sidePx; font-size: @fontPx">@((x == paint.cursorX && y == paint.cursorY) ? "‚Øè" : "")</div>
			}
			</div>
		}
	}
</root>

@code
{
	public Painting paint;

	protected override void OnStart()
	{
		paint = new(4, 4);
		paint.Randomize();
	}
	protected override int BuildHash() => System.HashCode.Combine( paint );
}
